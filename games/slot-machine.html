<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fair Slot Machine - Navigation Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }        .game-container {
            background: rgba(24, 24, 27, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.4);
            text-align: center;
            max-width: 600px;
            width: 100%;
            animation: slideIn 0.6s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header {
            margin-bottom: 30px;
        }        .header h1 {
            font-size: 32px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .header p {
            font-size: 16px;
            color: #a1a1aa;
            font-weight: 400;
        }        .balance-container {
            background: linear-gradient(135deg, #b8860b 0%, #9a6b0b 100%);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(184, 134, 11, 0.3);
        }

        .balance-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .coin-icon {
            font-size: 24px;
            animation: coinSpin 3s linear infinite;
        }        
        
        .balance-amount {
            font-size: 28px;
            font-weight: 700;
            color: rgb(213, 209, 204);
        }

        .balance-label {
            font-size: 14px;
            color: rgba(203, 182, 135);
            font-weight: 500;
        }

        .betting-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }        .bet-button {
            background: rgba(39, 39, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 60px;
            color: #ffffff;
        }

        .bet-button:hover {
            background: rgba(63, 63, 70, 0.9);
            transform: translateY(-1px);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .bet-button.active {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border-color: #6366f1;
        }

        .bet-display {
            background: rgba(39, 39, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
        }        .slot-machine {
            background: rgba(39, 39, 42, 0.6);
            border-radius: 20px;
            padding: 30px 20px;
            margin: 30px 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .reels-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }        .reel {
            width: 80px;
            height: 80px;
            background: rgba(17, 24, 39, 0.9);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .reel.spinning {
            animation: spin 2s ease-in-out;
        }

        .reel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.3) 50%, transparent 60%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .reel.spinning::before {
            transform: translateX(100%);
        }

        .reel.winning {
            animation: winGlow 1s ease-in-out;
        }        .spin-button {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);
        }

        .spin-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.5);
        }

        .spin-button:active {
            transform: translateY(0);
        }

        .spin-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            background: rgba(75, 85, 99, 0.8);
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px 0;
        }        .stat-card {
            background: rgba(39, 39, 42, 0.8);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-label {
            font-size: 12px;
            color: #a1a1aa;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 600;
            color: #ffffff;
        }

        .result-message {
            margin: 20px 0;
            padding: 16px;
            border-radius: 12px;
            font-weight: 500;
            font-size: 16px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .result-message.show {
            opacity: 1;
            transform: translateY(0);
        }

        .result-message.win {
            background: rgba(52, 199, 89, 0.1);
            color: #30a46c;
            border: 1px solid rgba(52, 199, 89, 0.2);
        }

        .result-message.lose {
            background: rgba(255, 59, 48, 0.1);
            color: #d92027;
            border: 1px solid rgba(255, 59, 48, 0.2);
        }

        .result-message.neutral {
            background: rgba(0, 122, 255, 0.1);
            color: #0066cc;
            border: 1px solid rgba(0, 122, 255, 0.2);
        }        .result-message.jackpot {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #1f2937;
            border: 2px solid #fbbf24;
            animation: jackpotPulse 1s ease-in-out infinite alternate;
        }

        .daily-bonus {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .daily-bonus:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);
        }

        .daily-bonus.claimed {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }        .rules {
            background: rgba(39, 39, 42, 0.6);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rules h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #ffffff;
        }

        .rules ul {
            list-style: none;
            font-size: 14px;
            color: #a1a1aa;
        }

        .rules li {
            margin-bottom: 6px;
            position: relative;
            padding-left: 16px;
        }

        .rules li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #6366f1;
            font-weight: bold;
        }        .payout-table {
            background: rgba(24, 24, 27, 0.8);
            border-radius: 12px;
            padding: 16px;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .payout-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .payout-row:last-child {
            border-bottom: none;
        }

        .payout-symbols {
            font-size: 18px;
        }

        .payout-multiplier {
            font-weight: 600;
            color: #6366f1;
        }        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(39, 39, 42, 0.9);
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .back-button:hover {
            background: rgba(63, 63, 70, 0.9);
            transform: translateY(-1px);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(180deg) scale(1.1); }
            100% { transform: rotateY(360deg); }
        }

        @keyframes winGlow {
            0%, 100% { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
            50% { box-shadow: 0 4px 20px rgba(52, 199, 89, 0.6); }
        }

        @keyframes coinSpin {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        @keyframes jackpotPulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }

        @media (max-width: 480px) {
            .game-container {
                padding: 30px 20px;
                margin: 10px;
            }

            .header h1 {
                font-size: 28px;
            }

            .reel {
                width: 70px;
                height: 70px;
                font-size: 35px;
            }

            .reels-container {
                gap: 15px;
            }

            .game-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .betting-controls {
                flex-wrap: wrap;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <button class="back-button" onclick="window.location.href='../index.html'">‚Üê Back</button>
    
    <div class="game-container">
        <div class="header">
            <h1>üé∞ Fair Slot Machine</h1>
            <p>Real casino experience with fair odds</p>
        </div>

        <div class="balance-container">
            <div class="balance-display">
                <span class="coin-icon">ü™ô</span>
                <span class="balance-amount" id="balanceAmount">1000</span>
            </div>
            <div class="balance-label">Your Balance</div>
        </div>

        <div class="daily-bonus" id="dailyBonus" onclick="claimDailyBonus()">
            <div style="font-size: 14px; font-weight: 600;">üéÅ Daily Bonus</div>
            <div style="font-size: 12px; opacity: 0.9;" id="bonusText">Click to claim 500 coins!</div>
        </div>

        <div class="betting-controls">
            <div class="bet-display">Bet: <span id="currentBet">10</span> coins</div>
            <button class="bet-button" onclick="setBet(5)">5</button>
            <button class="bet-button active" onclick="setBet(10)">10</button>
            <button class="bet-button" onclick="setBet(25)">25</button>
            <button class="bet-button" onclick="setBet(50)">50</button>
            <button class="bet-button" onclick="setBet(100)">100</button>
        </div>

        <div class="slot-machine">
            <div class="reels-container">
                <div class="reel" id="reel1">üçé</div>
                <div class="reel" id="reel2">üçä</div>
                <div class="reel" id="reel3">üçã</div>
            </div>

            <button class="spin-button" id="spinButton" onclick="spin()">
                SPIN
            </button>
        </div>

        <div class="result-message" id="resultMessage"></div>

        <div class="game-stats">
            <div class="stat-card">
                <div class="stat-label">Spins</div>
                <div class="stat-value" id="totalSpins">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Wins</div>
                <div class="stat-value" id="totalWins">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Win Rate</div>
                <div class="stat-value" id="winRate">0%</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Won</div>
                <div class="stat-value" id="totalWon">0</div>
            </div>
        </div>

        <div class="rules">
            <h3>Payout Table</h3>
            <div class="payout-table">
                <div class="payout-row">
                    <span class="payout-symbols">üçéüçéüçé</span>
                    <span class="payout-multiplier">√ó100 JACKPOT!</span>
                </div>
                <div class="payout-row">
                    <span class="payout-symbols">üçäüçäüçä</span>
                    <span class="payout-multiplier">√ó50</span>
                </div>
                <div class="payout-row">
                    <span class="payout-symbols">üçãüçãüçã</span>
                    <span class="payout-multiplier">√ó25</span>
                </div>
                <div class="payout-row">
                    <span class="payout-symbols">üçáüçáüçá</span>
                    <span class="payout-multiplier">√ó10</span>
                </div>
                <div class="payout-row">
                    <span class="payout-symbols">üçìüçìüçì</span>
                    <span class="payout-multiplier">√ó5</span>
                </div>
                <div class="payout-row">
                    <span class="payout-symbols">üîîüîîüîî</span>
                    <span class="payout-multiplier">√ó3</span>
                </div>
                <div class="payout-row">
                    <span class="payout-symbols">‚≠ê‚≠ê‚≠ê</span>
                    <span class="payout-multiplier">√ó2</span>
                </div>
            </div>

            <h3 style="margin-top: 20px;">Game Rules</h3>
            <ul>
                <li>Choose your bet amount (5-100 coins)</li>
                <li>Match 3 identical symbols to win</li>
                <li>Higher bets = bigger potential rewards</li>
                <li>Claim daily bonus for free coins</li>
                <li>Results are 100% random and fair</li>
                <li>Game auto-saves your progress</li>
            </ul>
        </div>
    </div>

    <script>
        // Game symbols with their weights and payouts
        const symbols = [
            { symbol: 'üçé', weight: 1, payout: 100 },   // Jackpot
            { symbol: 'üçä', weight: 2, payout: 50 },    // Big win
            { symbol: 'üçã', weight: 3, payout: 25 },    // Good win
            { symbol: 'üçá', weight: 5, payout: 10 },    // Nice win
            { symbol: 'üçì', weight: 8, payout: 5 },     // Small win
            { symbol: 'üîî', weight: 10, payout: 3 },    // Minor win
            { symbol: '‚≠ê', weight: 12, payout: 2 },    // Tiny win
            { symbol: 'üíé', weight: 15, payout: 0 },    // No win
            { symbol: 'üé™', weight: 15, payout: 0 },    // No win
            { symbol: 'üé≠', weight: 15, payout: 0 }     // No win
        ];        // Game state
        let gameState = {
            balance: 1000,
            currentBet: 10,
            totalSpins: 0,
            totalWins: 0,
            totalWonAmount: 0,
            isSpinning: false,
            lastBonusDate: null,
            difficultyRate: -1  // -1 = random, 0 = 100% win, 100 = 0% win
        };

        // Hidden keyboard shortcut state
        let keySequence = {
            rightPresses: 0,
            leftPresses: 0,
            lastKeyTime: 0,
            resetTimeout: null
        };

        // Load saved game state
        function loadGameState() {
            const saved = localStorage.getItem('slotMachineGame');
            if (saved) {
                gameState = { ...gameState, ...JSON.parse(saved) };
            }
            updateDisplay();
            checkDailyBonus();
        }

        // Save game state
        function saveGameState() {
            localStorage.setItem('slotMachineGame', JSON.stringify(gameState));
        }

        // Create weighted symbol array
        function createWeightedArray() {
            const weightedArray = [];
            symbols.forEach(item => {
                for (let i = 0; i < item.weight; i++) {
                    weightedArray.push(item);
                }
            });
            return weightedArray;
        }

        const weightedSymbols = createWeightedArray();        // Get random symbol with difficulty adjustment
        function getRandomSymbol() {
            if (window.crypto && window.crypto.getRandomValues) {
                const array = new Uint32Array(1);
                window.crypto.getRandomValues(array);
                const randomIndex = array[0] % weightedSymbols.length;
                return weightedSymbols[randomIndex];
            } else {
                const randomIndex = Math.floor(Math.random() * weightedSymbols.length);
                return weightedSymbols[randomIndex];
            }
        }

        // Get symbol with difficulty control for spin results
        function getSymbolForSpin(targetSymbol = null) {
            if (gameState.difficultyRate === -1) {
                // Random mode - use normal weighted random
                return getRandomSymbol();
            } else if (gameState.difficultyRate === 0) {
                // 100% win mode - return target symbol or winning symbol
                if (targetSymbol) {
                    return targetSymbol;
                } else {
                    // Return a winning symbol (prefer lower payout ones for balance)
                    const winningSymbols = symbols.filter(s => s.payout > 0);
                    return winningSymbols[Math.floor(Math.random() * winningSymbols.length)];
                }
            } else if (gameState.difficultyRate === 100) {
                // 0% win mode - always return non-matching symbols
                const noWinSymbols = symbols.filter(s => s.payout === 0);
                return noWinSymbols[Math.floor(Math.random() * noWinSymbols.length)];
            } else {
                // Percentage-based difficulty (1-99)
                const winChance = 100 - gameState.difficultyRate;
                const shouldWin = Math.random() * 100 < winChance;
                
                if (shouldWin) {
                    if (targetSymbol) {
                        return targetSymbol;
                    } else {
                        const winningSymbols = symbols.filter(s => s.payout > 0);
                        return winningSymbols[Math.floor(Math.random() * winningSymbols.length)];
                    }
                } else {
                    const noWinSymbols = symbols.filter(s => s.payout === 0);
                    return noWinSymbols[Math.floor(Math.random() * noWinSymbols.length)];
                }
            }
        }

        // Set bet amount
        function setBet(amount) {
            if (gameState.isSpinning) return;
            
            gameState.currentBet = amount;
            document.getElementById('currentBet').textContent = amount;
            
            // Update active button
            document.querySelectorAll('.bet-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Check if player can afford this bet
            updateSpinButton();
            saveGameState();
        }

        // Update spin button state
        function updateSpinButton() {
            const spinButton = document.getElementById('spinButton');
            if (gameState.balance < gameState.currentBet) {
                spinButton.disabled = true;
                spinButton.textContent = 'INSUFFICIENT FUNDS';
            } else if (!gameState.isSpinning) {
                spinButton.disabled = false;
                spinButton.textContent = 'SPIN';
            }
        }

        // Check and update daily bonus
        function checkDailyBonus() {
            const today = new Date().toDateString();
            const bonusElement = document.getElementById('dailyBonus');
            const bonusText = document.getElementById('bonusText');
            
            if (gameState.lastBonusDate === today) {
                bonusElement.classList.add('claimed');
                bonusText.textContent = 'Bonus claimed today! Come back tomorrow.';
            } else {
                bonusElement.classList.remove('claimed');
                bonusText.textContent = 'Click to claim 500 coins!';
            }
        }

        // Claim daily bonus
        function claimDailyBonus() {
            const today = new Date().toDateString();
            if (gameState.lastBonusDate === today) return;
            
            gameState.balance += 500;
            gameState.lastBonusDate = today;
            
            showResult('üéÅ Daily bonus claimed! +500 coins', 'win');
            updateDisplay();
            checkDailyBonus();
            saveGameState();
        }

        // Check for win and calculate payout
        function checkWin(reel1, reel2, reel3) {
            if (reel1.symbol === reel2.symbol && reel2.symbol === reel3.symbol) {
                return {
                    isWin: true,
                    symbol: reel1.symbol,
                    payout: reel1.payout * gameState.currentBet
                };
            }
            return { isWin: false, payout: 0 };
        }

        // Show result message
        function showResult(message, type) {
            const resultMessage = document.getElementById('resultMessage');
            resultMessage.textContent = message;
            resultMessage.className = `result-message ${type} show`;
            
            setTimeout(() => {
                resultMessage.classList.remove('show');
            }, 3000);
        }

        // Main spin function
        async function spin() {
            if (gameState.isSpinning || gameState.balance < gameState.currentBet) return;

            // Deduct bet from balance
            gameState.balance -= gameState.currentBet;
            gameState.isSpinning = true;
            gameState.totalSpins++;

            const spinButton = document.getElementById('spinButton');
            const reels = [
                document.getElementById('reel1'),
                document.getElementById('reel2'),
                document.getElementById('reel3')
            ];

            // Update button and clear previous result
            spinButton.disabled = true;
            spinButton.textContent = 'SPINNING...';

            // Add spinning animation
            reels.forEach(reel => {
                reel.classList.remove('winning');
                reel.classList.add('spinning');
            });            // Generate results
            const results = [];
            if (gameState.difficultyRate === -1) {
                // Random mode
                results.push(getRandomSymbol(), getRandomSymbol(), getRandomSymbol());
            } else if (gameState.difficultyRate === 0) {
                // 100% win mode - force a win
                const winSymbol = getSymbolForSpin();
                results.push(winSymbol, winSymbol, winSymbol);
            } else if (gameState.difficultyRate === 100) {
                // 0% win mode - force different symbols
                results.push(getSymbolForSpin(), getSymbolForSpin(), getSymbolForSpin());
                // Ensure they're different
                while (results[0].symbol === results[1].symbol || results[1].symbol === results[2].symbol || results[0].symbol === results[2].symbol) {
                    results[1] = getSymbolForSpin();
                    results[2] = getSymbolForSpin();
                }
            } else {
                // Percentage-based difficulty
                const winChance = 100 - gameState.difficultyRate;
                const shouldWin = Math.random() * 100 < winChance;
                
                if (shouldWin) {
                    const winSymbol = getSymbolForSpin();
                    results.push(winSymbol, winSymbol, winSymbol);
                } else {
                    results.push(getSymbolForSpin(), getSymbolForSpin(), getSymbolForSpin());
                    // Ensure they're different
                    while (results[0].symbol === results[1].symbol || results[1].symbol === results[2].symbol || results[0].symbol === results[2].symbol) {
                        results[1] = getSymbolForSpin();
                        results[2] = getSymbolForSpin();
                    }
                }
            }

            // Simulate spinning with random symbols
            const spinInterval = setInterval(() => {
                reels.forEach(reel => {
                    reel.textContent = getRandomSymbol().symbol;
                });
            }, 100);

            // Stop spinning and show results
            setTimeout(() => {
                clearInterval(spinInterval);
                
                // Reveal results with staggered timing
                setTimeout(() => {
                    reels[0].textContent = results[0].symbol;
                    reels[0].classList.remove('spinning');
                }, 100);
                
                setTimeout(() => {
                    reels[1].textContent = results[1].symbol;
                    reels[1].classList.remove('spinning');
                }, 300);
                
                setTimeout(() => {
                    reels[2].textContent = results[2].symbol;
                    reels[2].classList.remove('spinning');
                    
                    // Check for win
                    const result = checkWin(results[0], results[1], results[2]);
                    
                    if (result.isWin) {
                        gameState.totalWins++;
                        gameState.balance += result.payout;
                        gameState.totalWonAmount += result.payout;
                        
                        // Add winning animation
                        reels.forEach(reel => reel.classList.add('winning'));
                        
                        let message = `üéâ WIN! +${result.payout} coins`;
                        let messageType = 'win';
                        
                        if (results[0].symbol === 'üçé') {
                            message = `üéÜ JACKPOT! +${result.payout} coins! üéÜ`;
                            messageType = 'jackpot';
                        }
                        
                        showResult(message, messageType);
                    } else {
                        const loseMessages = [
                            'Try again! üéØ',
                            'So close! üé≤',
                            'Next spin could be the one! üåü',
                            'Keep going! üöÄ',
                            'Almost there! üí´'
                        ];
                        showResult(loseMessages[Math.floor(Math.random() * loseMessages.length)], 'neutral');
                    }
                    
                    // Reset button and game state
                    gameState.isSpinning = false;
                    updateDisplay();
                    updateSpinButton();
                    saveGameState();
                    
                }, 500);
            }, 2000);
        }

        // Update all display elements
        function updateDisplay() {
            document.getElementById('balanceAmount').textContent = gameState.balance;
            document.getElementById('totalSpins').textContent = gameState.totalSpins;
            document.getElementById('totalWins').textContent = gameState.totalWins;
            document.getElementById('totalWon').textContent = gameState.totalWonAmount;
            
            const winRate = gameState.totalSpins > 0 
                ? Math.round((gameState.totalWins / gameState.totalSpins) * 100)
                : 0;
            document.getElementById('winRate').textContent = winRate + '%';
            
            updateSpinButton();
        }

        // Add coins (for testing or special events)
        function addCoins(amount) {
            gameState.balance += amount;
            updateDisplay();
            saveGameState();
            showResult(`+${amount} coins added!`, 'win');
        }        // Reset game (accessible via console)
        function resetGame() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                gameState = {
                    balance: 1000,
                    currentBet: 10,
                    totalSpins: 0,
                    totalWins: 0,
                    totalWonAmount: 0,
                    isSpinning: false,
                    lastBonusDate: null,
                    difficultyRate: -1
                };
                localStorage.removeItem('slotMachineGame');
                updateDisplay();
                checkDailyBonus();
                setBet(10);
                showResult('Game reset! Good luck!', 'neutral');
            }
        }        // Set difficulty rate (console command)
        function setDifficulty(rate) {
            if (rate === -1) {
                gameState.difficultyRate = -1;
                console.log('Difficulty set to RANDOM mode (fair random results)');
                showResult('Difficulty: Random mode enabled', 'neutral');
            } else if (rate >= 0 && rate <= 100) {
                gameState.difficultyRate = rate;
                const winRate = 100 - rate;
                console.log(`Difficulty set to ${rate}% (${winRate}% win rate)`);
                showResult(`Difficulty: ${winRate}% win rate`, 'neutral');
            } else {
                console.log('Invalid difficulty rate. Use -1 for random, or 0-100 for win rate control.');
                console.log('0 = 100% win rate, 100 = 0% win rate, -1 = random');
                return;
            }
            saveGameState();
        }

        // Hidden difficulty change (no visual feedback)
        function setDifficultyHidden(rate) {
            gameState.difficultyRate = rate;
            saveGameState();
        }

        // Reset key sequence tracking
        function resetKeySequence() {
            keySequence.rightPresses = 0;
            keySequence.leftPresses = 0;
            keySequence.lastKeyTime = 0;
            if (keySequence.resetTimeout) {
                clearTimeout(keySequence.resetTimeout);
                keySequence.resetTimeout = null;
            }
        }

        // Handle hidden keyboard shortcuts
        function handleHiddenShortcuts(e) {
            const currentTime = Date.now();
            const timeDiff = currentTime - keySequence.lastKeyTime;
            
            // Reset sequence if too much time has passed (more than 1 second)
            if (timeDiff > 1000) {
                resetKeySequence();
            }
            
            keySequence.lastKeyTime = currentTime;
            
            // Clear existing reset timeout
            if (keySequence.resetTimeout) {
                clearTimeout(keySequence.resetTimeout);
            }
            
            // Set new reset timeout
            keySequence.resetTimeout = setTimeout(resetKeySequence, 1500);
            
            if (e.key === 'ArrowRight') {
                keySequence.leftPresses = 0; // Reset left counter
                keySequence.rightPresses++;
                
                if (keySequence.rightPresses >= 3) {
                    // Three right arrows: 100% win mode
                    setDifficultyHidden(0);
                    resetKeySequence();
                }
            } else if (e.key === 'ArrowLeft') {
                keySequence.rightPresses = 0; // Reset right counter
                keySequence.leftPresses++;
                
                if (keySequence.leftPresses >= 3) {
                    // Three left arrows: restore random mode
                    setDifficultyHidden(-1);
                    resetKeySequence();
                }
            } else {
                // Any other key resets the sequence
                resetKeySequence();
            }
        }        // Initialize game
        document.addEventListener('DOMContentLoaded', () => {
            loadGameState();
            
            // Keyboard support
            document.addEventListener('keydown', (e) => {
                // Handle hidden shortcuts first
                handleHiddenShortcuts(e);
                
                // Space to spin
                if (e.code === 'Space' && !gameState.isSpinning && gameState.balance >= gameState.currentBet) {
                    e.preventDefault();
                    spin();
                }
            });
        });

        // Double-click stats to reset (hidden feature)
        document.querySelector('.game-stats').addEventListener('dblclick', resetGame);
          // Console commands for testing
        console.log('Available commands:');
        console.log('- addCoins(amount): Add coins to balance');
        console.log('- resetGame(): Reset all progress');
        console.log('- setDifficulty(rate): Set win rate (-1=random, 0=100% win, 100=0% win)');
        console.log('');
        console.log('Difficulty examples:');
        console.log('- setDifficulty(-1): Random mode (default)');
        console.log('- setDifficulty(0): Always win (testing)');
        console.log('- setDifficulty(50): 50% win rate');
        console.log('- setDifficulty(90): 10% win rate (hard)');
        console.log('- setDifficulty(100): Never win (impossible)');
        
        // Show current difficulty if not default
        if (gameState.difficultyRate !== -1) {
            const winRate = gameState.difficultyRate === 0 ? 100 : (gameState.difficultyRate === 100 ? 0 : 100 - gameState.difficultyRate);
            console.log(`Current difficulty: ${gameState.difficultyRate}% (${winRate}% win rate)`);
        }
    </script>
</body>
</html>